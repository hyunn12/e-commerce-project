# 01. 요구사항 명세

## 📘 용어 정리
| 용어    | 영어 (도메인 명) |
|-------|------------|
| 사용자   | User       |
| 포인트   | Point      |
| 브랜드   | Brand      |
| 상품    | Product    |
| 좋아요   | Like       |
| 주문    | Order      |
| 주문 항목 | OrderItem  |


## 🏷 브랜드 & 상품 ( Brands / Products )

### 브랜드 정보 조회
- 목적: 사용자는 특정 브랜드의 정보를 조회할 수 있다.
- Actor: 일반 사용자
- 주요시나리오
  - 사용자가 특정 브랜드를 선택해 브랜드 정보를 요청한다.
  - 시스템은 해당 브랜드 정보를 반환한다.
- 시스템 동작
  - `brandId` 가 포함된 요청 수신
  - DB에서 브랜드 정보 조회
  - 브랜드 정보 반환
- 예외
  - `brandId` 가 누락된 경우 -> 400 Bad Request
  - 해당 브랜드가 없는 경우 -> 404 Not Found

### 상품 목록 조회
- 목적: 사용자는 조건에 맞는 상품 목록을 조회할 수 있다.
- Actor: 일반 사용자
- 주요 시나리오
  - 사용자가 특정 브랜드나 정렬 조건을 선택해 상품 목록을 요청한다.
  - 시스템은 조건에 맞는 상품 목록을 페이지 단위로 반환한다.
- 시스템 동작
  - 파라미터가 포함된 요청 수신
  - DB에서 상품 목록 조회
  - 상품 목록 반환
- 예외
  - 잘못된 파라미터값 ( 페이지 번호, 페이지당 상품 수, 정렬기준 ) → 400 Bad Request

### 상품 상세 조회
- 목적: 사용자는 특정 상품의 정보를 조회할 수 있다.
- Actor: 일반 사용자
- 주요 시나리오
  - 사용자가 특정 상품을 선택해 상품 정보를 요청한다.
  - 시스템은 해당 상품 정보를 반환한다.
- 시스템 동작
  - `productId` 가 포함된 요청 수신
  - DB에서 상품 정보 조회
  - 상품 정보 반환
- 예외
  - `productId` 가 누락된 경우 -> 400 Bad Request
  - 해당 상품이 없는 경우 -> 404 Not Found

## ❤️ 좋아요 ( Likes )

### 상품 좋아요 등록/취소
- 목적: 회원은 상품에 좋아요를 등록하거나 취소할 수 있다.
- Actor: 일반 로그인 사용자
- 주요 시나리오
  - 회원이 특정 상품을 선택해 좋아요를 등록한다.
  - 이미 좋아요한 상품을 다시 누른 경우 좋아요를 취소한다.
  - 시스템은 좋아요 처리 결과를 반환한다.
- 시스템 동작
  - `X-USER-ID` 헤더와 `productId` 가 포함된 요청 수신
  - DB에서 해당 유저의 해당 상품 좋아요 여부 조회
  - 없으면 좋아요 등록 / 있으면 좋아요 취소
  - 좋아요 등록/취소 처리 결과 반환
- 예외
  - `X-USER-ID` 헤더가 누락된 경우 -> 400 Bad Request
  - `productId` 가 누락된 경우 -> 400 Bad Request
  - 해당 회원이 없는 경우 -> 404 Not Found
  - 해당 상품이 없는 경우 -> 404 Not Found

### 좋아요 상품 목록 조회
- 목적: 회원은 자신이 좋아요를 등록한 상품 목록을 조회할 수 있다.
- Actor: 일반 로그인 사용자
- 주요 시나리오
  - 회원이 내가 좋아요를 등록한 상품 목록을 요청한다.
  - 시스템은 좋아요 등록한 상품 목록을 반환한다.
- 시스템 동작
  - `X-USER-ID` 헤더가 포함된 요청 수신
  - DB에서 좋아요 상품 목록 조회
  - 좋아요 상품 목록 반환
- 예외
  - `X-USER-ID` 헤더가 누락된 경우 -> 400 Bad Request
  - 해당 회원이 없는 경우 -> 404 Not Found

## 🧾 주문 / 결제 ( Orders )

### 주문 요청
- 목적: 회원은 여러 상품을 한번에 주문할 수 있다.
- Actor: 일반 로그인 사용자
- 주요 시나리오
  - 회원이 여러 상품을 선택하여 주문을 요청한다.
  - 시스템은 주문 처리 결과를 반환한다.
- 시스템 동작
  - `X-USER-ID` 헤더와 `productId`, 주문 수량 목록이 포함된 요청 수신
  - DB에서 각 상품에 대해 상품 존재 여부 및 재고 조회
  - 있으면 차감 / 없으면 예외 처리
  - DB에서 회원의 보유 포인트를 조회
  - 주문 총액보다 클 경우 총액만큼 차감 / 부족하면 예외 처리
  - 주문 정보 저장
  - 외부 시스템에 주문 정보 전송
  - 주문 처리 결과 반환
- 예외
  - `X-USER-ID` 헤더가 누락된 경우 -> 400 Bad Request
  - `productId` 가 누락된 경우 -> 400 Bad Request
  - 해당 회원이 없는 경우 -> 404 Not Found
  - 해당 상품이 없는 경우 -> 404 Not Found
  - 상품 재고가 부족한 경우 -> 409 Conflict
  - 포인트가 부족한 경우 -> 409 Conflict
  - 외부 시스템에 주문 정보 전송이 실패한 경우 -> 500 Internal Server Error

### 주문 목록 조회
- 목적: 회원은 주문 목록을 조회할 수 있다.
- Actor: 일반 로그인 사용자
- 주요 시나리오
  - 회원이 자신의 주문 목록을 요청한다.
  - 시스템은 주문 목록을 반환한다.
- 시스템 동작
  - `X-USER-ID` 헤더가 포함된 요청 수신
  - DB에서 주문 목록 조회
  - 주문 목록 반환
- 예외
  - `X-USER-ID` 헤더가 누락된 경우 -> 400 Bad Request
  - 해당 회원이 없는 경우 -> 404 Not Found

### 주문 상세 조회
- 목적: 회원은 특정 주문의 정보를 조회할 수 있다.
- Actor: 일반 로그인 사용자
- 주요 시나리오
  - 사용자가 특정 주문을 선택해 주문 정보를 요청한다.
  - 시스템은 해당 주문 정보를 반환한다.
- 시스템 동작
  - `orderId` 가 포함된 요청 수신
  - DB에서 주문 정보 조회
  - 주문 정보 반환
- 예외
  - `X-USER-ID` 헤더가 누락된 경우 -> 400 Bad Request
  - `orderId` 가 누락된 경우 -> 400 Bad Request
  - 해당 회원이 없는 경우 -> 404 Not Found
  - 해당 주문이 없는 경우 -> 404 Not Found
  - 해당 주문이 다른 회원의 주문인 경우 -> 403 Forbidden
